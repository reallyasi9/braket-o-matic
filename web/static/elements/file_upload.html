<!--
@license
Original code Copyright (c) 2015 Winston Howes. All rights reserved.
This code may only be used under the MIT license found at https://github.com/winhowes/file-upload/blob/master/LICENSE
-->
<link rel="import" href="../packages/polymer/polymer.html">

<!--
An element providing a solution to no problem in particular.

Example:

    <file-upload target="/path/to/destination"></file-upload>

@demo
-->

<link rel="import" href="../packages/polymer_elements/paper_button.html">
<link rel="import" href="../packages/polymer_elements/paper_progress.html">
<link rel="import" href="../packages/polymer_elements/iron_icons.html">

<dom-module id="file-upload">

  <style>
    :host {
        display: inline-block;
    }

    .enabled {
      border: 1px dashed #555;
      @apply(--file-upload-upload-border-enabled);
    }

    .hover {
      opacity: .7;
      border: 1px dashed #111;
      @apply(--file-upload-upload-border-hover);
    }

    #UploadBorder{
      vertical-align: middle;
      color: #555;
      padding: 20px;
      max-height: 300px;
      overflow-y: auto;
      display: inline-block;
      @apply(--file-upload-upload-border);
    }

    #dropArea {
      text-align: center;
      @apply(--file-upload-drop-area);
    }

    paper-button#button {
      margin-bottom: 20px;
      @apply(--file-upload-button);
    }

    .file {
      padding: 10px 0px;
      @apply(--file-upload-file);
    }

    .commands {
      float: right;
      @apply(--file-upload-commands);
    }

    .commands iron-icon:not([icon="check-circle"]) {
      cursor: pointer;
      opacity: .9;
      @apply(--file-upload-commands-faded);
    }

    .commands iron-icon:hover {
      opacity: 1;
      @apply(--file-upload-commands-hovered);
    }

    [hidden] {
      display: none;
    }

    .error {
      color: #f40303;
      font-size: 11px;
      margin: 2px 0px -3px;
      @apply(--file-upload-error);
    }

    paper-progress {
      --paper-progress-active-color: #03a9f4;
    }

    paper-progress[error] {
      --paper-progress-active-color: #f40303;
    }
  </style>

  <template>
    <div>
      <paper-button id="button" icon="file-upload" class="blue" on-click="fileClick">
        <content></content>
      </paper-button>
      <div id='UploadBorder'>
        <div id="dropArea" hidden$="{{!shownDropText}}">{{dropText}}</div>
        <template is="dom-repeat" items="{{files}}">
          <div class="file">
            <div class="name">
              <span>{{item.name}}</span>
              <div class="commands">
                <iron-icon icon="autorenew" title="{{retryText}}" on-click="retryUpload" hidden$="{{!item.error}}"></iron-icon>
                <iron-icon icon="cancel" title="{{removeText}}" on-click="cancelUpload" hidden$="{{item.complete}}"></iron-icon>
                <iron-icon icon="check-circle" title="{{successText}}" hidden$="{{!item.complete}}"></iron-icon>
              </div>
            </div>
            <div class="error" hidden$="{{!item.error}}">{{errorText}}</div>
            <div hidden$={{progressHidden}}>
              <paper-progress value$="{{item.progress}}" error$="{{item.error}}"></paper-progress>
            </div>
          </div>
        </template>
      </div>
    </div>
    <input type="file" id="fileInput" on-change="filesChange" hidden multiple="{{multi}}" accept="{{accept}}">
    <!--<paper-toast id="toastSuccess" text="File uploaded successfully!"></paper-toast>
    <paper-toast id="toastFail" text="Error uploading file!"></paper-toast>-->
  </template>

</dom-module>
